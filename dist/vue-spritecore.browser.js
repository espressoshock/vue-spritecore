!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.VueSpritecore=factory():root.VueSpritecore=factory()}(this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=3)}([function(module,exports){var g,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};g=function(){return this}();try{g=g||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":_typeof(window))&&(g=window)}module.exports=g},function(module,exports,__webpack_require__){__webpack_require__(9);var Component=__webpack_require__(7)(__webpack_require__(4),__webpack_require__(8),null,null);module.exports=Component.exports},function(module,exports){module.exports=function(){var list=[];return list.toString=function(){for(var result=[],i=0;i<this.length;i++){var item=this[i];item[2]?result.push("@media "+item[2]+"{"+item[1]+"}"):result.push(item[1])}return result.join("")},list.i=function(modules,mediaQuery){"string"==typeof modules&&(modules=[[null,modules,""]]);for(var alreadyImportedModules={},i=0;i<this.length;i++){var id=this[i][0];"number"==typeof id&&(alreadyImportedModules[id]=!0)}for(i=0;i<modules.length;i++){var item=modules[i];"number"==typeof item[0]&&alreadyImportedModules[item[0]]||(mediaQuery&&!item[2]?item[2]=mediaQuery:mediaQuery&&(item[2]="("+item[2]+") and ("+mediaQuery+")"),list.push(item))}},list}},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),function(global){function install(Vue){Vue.component("vue-spritecore",__WEBPACK_IMPORTED_MODULE_0__components_VueSpritecore_vue___default.a)}__webpack_exports__.install=install;var __WEBPACK_IMPORTED_MODULE_0__components_VueSpritecore_vue__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_0__components_VueSpritecore_vue___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__components_VueSpritecore_vue__);__webpack_require__.d(__webpack_exports__,"VueSpritecore",function(){return __WEBPACK_IMPORTED_MODULE_0__components_VueSpritecore_vue___default.a});var plugin={version:"1.0.0",install:install};__webpack_exports__.default=plugin;var GlobalVue=null;"undefined"!=typeof window?GlobalVue=window.Vue:void 0!==global&&(GlobalVue=global.Vue),GlobalVue&&GlobalVue.use(plugin)}.call(__webpack_exports__,__webpack_require__(0))},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),__webpack_exports__.default={name:"vue-spritecore",props:{spritesheet:{required:!0,type:String,default:""},json:{required:!0,type:Object,default:function(){return[]}},frameSorting:{type:String,required:!1,default:"asc",validator:function(val){return["asc","desc"].includes(val)}},scaleX:{type:Number,default:1,required:!1},scaleY:{type:Number,default:1,required:!1},autoplay:{type:Boolean,default:!1,required:!1},loop:{type:Boolean,default:!0,required:!1},id:{type:String,default:"vue-spritecore-canvas",required:!1},lowerBound:{type:Number,default:void 0,required:!1},upperBound:{type:Number,default:void 0,required:!1}},data:function(){return{sortingMethods:{ascending:"asc",descending:"desc"},animation:{frames:[],index:void 0,lower:0,upper:void 0,running:!1,framerate:void 0},sprite:void 0,context:void 0,timerRequestID:void 0,timer:{start:void 0,current:0,last:0,tolerance:.1}}},computed:{animationLength:function(){return this.animation.frames?this.animation.frames.length-1:0},canvasSize:function(){if(this.animation.frames)return{width:this.animation.frames[this.animation.lower].width*this.scaleX,height:this.animation.frames[this.animation.lower].height*this.scaleY}}},created:function(){this.init()},mounted:function(){},methods:{init:function(){var _this=this;this.sortFrames(),this.setBounds(),this.animation.index=this.animation.lower,this.sprite=new Image,this.sprite.src=this.spritesheet,this.sprite.onload=function(_ref){var sprite=_ref.sprite;_this.spriteInit(sprite)}},play:function(from,to){this.animation.index=Number.isNaN(Number(from))?this.animation.index:from,this.animation.upper=Number.isNaN(Number(to))?this.animation.upper:to,this.animation.running=!0,this.$emit("animationStarted",this.animation.index,this.animation.upper),this.timerRequestID=window.requestAnimationFrame(this.animationLoop)},playLegacy:function(frameRate){Number.isNaN(Number(frameRate)&&frameRate>0)||(this.animation.framerate=1e3/frameRate),this.animation.running=!0,this.$emit("animationStarted",this.animation.index,this.animation.upper),this.timer.last=performance.now(),this.timerRequestID=requestAnimationFrame(this.legacyLoop)},legacyLoop:function(now){var delta=now-this.timer.last;delta>=this.animation.framerate-this.timer.tolerance&&(this.timer.last=now-delta%this.animation.framerate,this.render(),this.animation.index++),this.animation.index<this.animation.upper&&(this.timerRequestID=requestAnimationFrame(this.legacyLoop))},stop:function(){window.cancelAnimationFrame(this.timerRequestID),this.animation.running=!1,this.$emit("animationStopped",this.animation.index)},reset:function(to){this.animation.running&&this.stop(),this.animation.index=Number.isNaN(Number(to))?this.animation.lower:to,this.render(),this.$emit("animationReset",this.animation.index)},spriteInit:function(sprite){this.context=this.$refs.vueSpritecoreCanvas.getContext("2d"),this.$refs.vueSpritecoreCanvas.width=this.canvasSize.width,this.$refs.vueSpritecoreCanvas.height=this.canvasSize.height,this.$emit("ready"),this.autoplay&&this.play()},setBounds:function(){void 0!==this.lowerBound&&this.lowerBound>=0&&(this.animation.lower=this.lowerBound),void 0!==this.upperBound&&this.upperBound<=this.animationLength&&this.upperBound>=this.animation.lower?this.animation.upper=this.upperBound:this.animation.upper=this.animationLength},animationLoop:function(){this.render(),this.animation.index++,this.animation.index<this.animation.upper?this.timerRequestID=window.requestAnimationFrame(this.animationLoop):(this.$emit("animationOver",this.animation.index),this.loop&&(this.animation.index=this.animation.lower,this.timerRequestID=window.requestAnimationFrame(this.animationLoop)))},render:function(){this.context.clearRect(0,0,this.canvasSize.width,this.canvasSize.height),this.context.drawImage(this.sprite,this.animation.frames[this.animation.index].x,this.animation.frames[this.animation.index].y,this.animation.frames[this.animation.index].width,this.animation.frames[this.animation.index].height,0,0,this.canvasSize.width,this.canvasSize.height)},sortFrames:function(){var _this2=this;this.json.frames.forEach(function(frame){_this2.animation.frames.push({name:frame.filename,x:frame.frame.x,y:frame.frame.y,width:frame.frame.w,height:frame.frame.h})}),this.animation.frames.sort(function(a,b){return a=a.name.toLowerCase(),b=b.name.toLowerCase(),_this2.frameSorting.localeCompare(_this2.sortingMethods.ascending)?a>b?-1:b>a?1:0:a>b?1:b>a?-1:0})}}}},function(module,exports){module.exports=function(parentId,list){for(var styles=[],newStyles={},i=0;i<list.length;i++){var item=list[i],id=item[0],css=item[1],media=item[2],sourceMap=item[3],part={id:parentId+":"+i,css:css,media:media,sourceMap:sourceMap};newStyles[id]?newStyles[id].parts.push(part):styles.push(newStyles[id]={id:id,parts:[part]})}return styles}},function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(2)(),exports.push([module.i,"",""])},function(module,exports){module.exports=function(rawScriptExports,compiledTemplate,scopeId,cssModules){var esModule,scriptExports=rawScriptExports=rawScriptExports||{},type=typeof rawScriptExports.default;"object"!==type&&"function"!==type||(esModule=rawScriptExports,scriptExports=rawScriptExports.default);var options="function"==typeof scriptExports?scriptExports.options:scriptExports;if(compiledTemplate&&(options.render=compiledTemplate.render,options.staticRenderFns=compiledTemplate.staticRenderFns),scopeId&&(options._scopeId=scopeId),cssModules){var computed=options.computed||(options.computed={});Object.keys(cssModules).forEach(function(key){var module=cssModules[key];computed[key]=function(){return module}})}return{esModule:esModule,exports:scriptExports,options:options}}},function(module,exports){module.exports={render:function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"vue-spritecore"},[_c("canvas",{ref:"vueSpritecoreCanvas",attrs:{id:_vm.id,width:_vm.canvasSize.width,height:_vm.canvasSize.height}})])},staticRenderFns:[]}},function(module,exports,__webpack_require__){var content=__webpack_require__(6);"string"==typeof content&&(content=[[module.i,content,""]]),content.locals&&(module.exports=content.locals);__webpack_require__(10)("0e54cea0",content,!0)},function(module,exports,__webpack_require__){function addStylesToDom(styles){for(var i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];if(domStyle){domStyle.refs++;for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j](item.parts[j]);for(;j<item.parts.length;j++)domStyle.parts.push(addStyle(item.parts[j]));domStyle.parts.length>item.parts.length&&(domStyle.parts.length=item.parts.length)}else{for(var parts=[],j=0;j<item.parts.length;j++)parts.push(addStyle(item.parts[j]));stylesInDom[item.id]={id:item.id,refs:1,parts:parts}}}}function createStyleElement(){var styleElement=document.createElement("style");return styleElement.type="text/css",head.appendChild(styleElement),styleElement}function addStyle(obj){var update,remove,styleElement=document.querySelector('style[data-vue-ssr-id~="'+obj.id+'"]');if(styleElement){if(isProduction)return noop;styleElement.parentNode.removeChild(styleElement)}if(isOldIE){var styleIndex=singletonCounter++;styleElement=singletonElement||(singletonElement=createStyleElement()),update=applyToSingletonTag.bind(null,styleElement,styleIndex,!1),remove=applyToSingletonTag.bind(null,styleElement,styleIndex,!0)}else styleElement=createStyleElement(),update=applyToTag.bind(null,styleElement),remove=function(){styleElement.parentNode.removeChild(styleElement)};return update(obj),function(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap)return;update(obj=newObj)}else remove()}}function applyToSingletonTag(styleElement,index,remove,obj){var css=remove?"":obj.css;if(styleElement.styleSheet)styleElement.styleSheet.cssText=replaceText(index,css);else{var cssNode=document.createTextNode(css),childNodes=styleElement.childNodes;childNodes[index]&&styleElement.removeChild(childNodes[index]),childNodes.length?styleElement.insertBefore(cssNode,childNodes[index]):styleElement.appendChild(cssNode)}}function applyToTag(styleElement,obj){var css=obj.css,media=obj.media,sourceMap=obj.sourceMap;if(media&&styleElement.setAttribute("media",media),sourceMap&&(css+="\n/*# sourceURL="+sourceMap.sources[0]+" */",css+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))+" */"),styleElement.styleSheet)styleElement.styleSheet.cssText=css;else{for(;styleElement.firstChild;)styleElement.removeChild(styleElement.firstChild);styleElement.appendChild(document.createTextNode(css))}}var hasDocument="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!hasDocument)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var listToStyles=__webpack_require__(5),stylesInDom={},head=hasDocument&&(document.head||document.getElementsByTagName("head")[0]),singletonElement=null,singletonCounter=0,isProduction=!1,noop=function(){},isOldIE="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());module.exports=function(parentId,list,_isProduction){isProduction=_isProduction;var styles=listToStyles(parentId,list);return addStylesToDom(styles),function(newList){for(var mayRemove=[],i=0;i<styles.length;i++){var item=styles[i],domStyle=stylesInDom[item.id];domStyle.refs--,mayRemove.push(domStyle)}newList?(styles=listToStyles(parentId,newList),addStylesToDom(styles)):styles=[];for(var i=0;i<mayRemove.length;i++){var domStyle=mayRemove[i];if(0===domStyle.refs){for(var j=0;j<domStyle.parts.length;j++)domStyle.parts[j]();delete stylesInDom[domStyle.id]}}}};var replaceText=function(){var textStore=[];return function(index,replacement){return textStore[index]=replacement,textStore.filter(Boolean).join("\n")}}()}])});